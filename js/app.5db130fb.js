(function(){"use strict";var e={8661:function(e,t,n){var r=n(9242),i=n(3396),a=n(7139);const s={id:"formio-land-form",class:"container container-fluid qg-site-width"},o={id:"qg-three-col",class:"row no-secondary-nav"},d={id:"qg-primary-content",role:"main"},l=(0,i._)("br",null,null,-1),u=(0,i._)("em",null,"(Land Act 1994)",-1),c=(0,i._)("div",{class:"clearfix"},null,-1),m=(0,i._)("div",{class:"qg-content-footer"},[(0,i._)("dl",null,[(0,i._)("dt",null,"Version:"),(0,i._)("dd",null,"2022/01")])],-1),h=(0,i._)("div",{id:"qg-options",class:"row justify-content-sm-end"},null,-1),p={id:"qg-secondary-content"};function g(e,t,n,r,g,f){const P=(0,i.up)("FormWrapper"),b=(0,i.up)("RightSideBar"),y=(0,i.up)("LeftSideBar");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",o,[(0,i._)("div",d,[(0,i._)("h1",null,[(0,i.Uk)((0,a.zw)(g.formName),1),l,u]),(0,i.Wm)(P,{projectUrl:g.projectUrl,wizardUrl:g.wizardUrl,createFormUrl:g.createFormUrl,formIdentifier:g.formIdentifier,savedApplicationPage:g.savedApplicationPage,thankYouPage:g.thankYouPage,userId:g.userId,submissionId:g.submissionId,hasPayment:g.hasPayment,paymentUrl:g.paymentUrl,recaptchaSiteKey:g.recaptchaSiteKey},null,8,["projectUrl","wizardUrl","createFormUrl","formIdentifier","savedApplicationPage","thankYouPage","userId","submissionId","hasPayment","paymentUrl","recaptchaSiteKey"]),c,m,h]),(0,i._)("aside",p,[(0,i.Wm)(b)]),(0,i.Wm)(y,{formName:g.formName},null,8,["formName"])])])}var f=n(1707);const P={class:"formio-wrapper"},b=(0,i._)("div",{id:"formio"},null,-1),y={class:"button-container lb"};function v(e,t,n,r,a,s){return(0,i.wg)(),(0,i.iD)("div",P,[b,(0,i._)("div",y,[0!==a.currentPageIndex&&!1===a.isSubmitted?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"qg-btn btn-default m-md-2",onClick:t[0]||(t[0]=(...e)=>s.saveAndExitButtonHandler&&s.saveAndExitButtonHandler(...e))},"Save and exit ")):(0,i.kq)("",!0),!1===a.isLastPanel&&!1===a.isSubmitted?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"qg-btn btn-primary m-md-2 offset-1",onClick:t[1]||(t[1]=(...e)=>s.saveAndContinueButtonHandler&&s.saveAndContinueButtonHandler(...e))}," Next ")):(0,i.kq)("",!0),!0===a.isLastPanel&&!1===a.isSubmitted&&"false"===n.hasPayment?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"qg-btn btn-primary m-md-2 offset-1",onClick:t[2]||(t[2]=(...e)=>s.submitFormHandler&&s.submitFormHandler(...e))}," Submit ")):(0,i.kq)("",!0),0!==a.currentPageIndex&&!1===a.isSubmitted?((0,i.wg)(),(0,i.iD)("a",{key:3,class:"qg-btn btn-link",onClick:t[3]||(t[3]=(...e)=>s.prevPageHandler&&s.prevPageHandler(...e))},"Back")):(0,i.kq)("",!0),0!==a.currentPageIndex&&!0===a.isSubmitted?((0,i.wg)(),(0,i.iD)("button",{key:4,class:"qg-btn btn-default m-md-2 offset-1",onClick:t[4]||(t[4]=(...e)=>s.prevPageHandler&&s.prevPageHandler(...e))},"Previous")):(0,i.kq)("",!0),!1===a.isLastPanel&&!0===a.isSubmitted?((0,i.wg)(),(0,i.iD)("button",{key:5,class:"qg-btn btn-default m-md-2 offset-1",onClick:t[5]||(t[5]=(...e)=>s.nextPageHandler&&s.nextPageHandler(...e))},"Next")):(0,i.kq)("",!0)])])}var I=n(65),x=n(6807);class w{constructor({isActive:e,isDisabled:t,title:n,key:r,index:i}){this.isActive=e,this.isDisabled=t,this.title=n,this.key=r,this.index=i}}class C{constructor({pageKey:e="",header:t="",content:n=""}){this.pageKey=e,this.header=t,this.content=n}}var S=n(6265),k=n.n(S),U={name:"FormWrapper",props:{savedApplicationPage:{type:String,required:!0},thankYouPage:{type:String,required:!0},projectUrl:{type:String,required:!0},wizardUrl:{type:String,required:!0},createFormUrl:{type:String,required:!0},userId:{type:String,required:!0},submissionId:{type:String,required:!0},formIdentifier:{type:String,required:!0},hasPayment:{type:String,required:!0},paymentUrl:{type:String},recaptchaSiteKey:{type:String}},data(){return{formio:{},currentPageIndex:0,isLastPanel:!1,isSubmitted:!1,disableSubmit:!0,buttonClicked:""}},mounted(){x.Formio.setProjectUrl(this.projectUrl),x.Formio.setUser({_id:this.userId}),x.Formio.createForm(document.getElementById("formio"),this.createFormUrl,{buttonSettings:{showCancel:!1,showNext:!1,showPrevious:!1,showSubmit:!1}}).then((e=>{""!==this.submissionId?e.loadSubmission().then((t=>{this.syncForm(e,t),this.currentPageIndex=parseInt(t.data.currentPageIndex),this.formio.setPage(this.currentPageIndex),this.updateCurrentPageIndex(this.currentPageIndex)})):(this.syncForm(e),this.updateCurrentPageIndex(0)),e.on("saveAndContinue",(()=>{this.saveAndContinueButtonHandler()})),e.on("saveAndExit",(()=>{this.buttonClicked="saveAndExit",this.saveAndExitButtonHandler()})),e.on("buildPanelList",(()=>{e.establishPages(),this.syncForm(e)})),e.on("pagesChanged",(()=>{e.isValid()||(this.updateCurrentPageIndex(this.currentPageIndex),this.syncForm(e))})),e.on("editPage",(e=>{this.currentPageIndex=this.getPageIndexByPageName(e),this.updateCurrentPageIndex(this.currentPageIndex)})),e.on("saveDraft",(()=>{this.afterSaveDraftHandler()})),e.on("submitDone",(()=>{window.location.href=this.thankYouPage})),e.on("payNow",(()=>{this.buttonClicked="payNow",e.submission.data.paySuccess=!1,this.saveDraftHandler()})),e.on("payLater",(()=>{this.buttonClicked="payLater",this.submitFormHandler()}))}))},computed:{...(0,I.Se)(["getCurrentPageIndex","getIsLastPanel"])},watch:{getCurrentPageIndex(){this.gotoPageHandler()}},methods:{getPageIndexByPageName(e){let t=0;return this.formio.pages.filter((function(n,r){e===n.key&&(t=r)})),t},syncForm(e,t={}){"undefined"!==typeof t.state&&"submitted"===t.state&&(e.options.readOnly=!0,e.options.renderMode="html",e.options.editMode=!1,e.redraw()),this.formio=e,this.currentPageIndex=e.page,this.isLastPanel=e.pages.length===e.page+1,this.isSubmitted="undefined"!==typeof t.state&&"submitted"===t.state;let n=this.buildPanelList(e.pages??[],e.page),r=e.form.config.helpers??[],i=this.buildHelpers(r);this.setCurrentPageIndex(e.page),this.setPanelList(n),this.setHelpers(i)},buildPanelList(e,t){return 0===e.length?[]:e.map(((e,n)=>{let r=!1,i=!0;return n===t&&(r=!0),n<=t&&(i=!1),new w({isActive:r,isDisabled:i,title:e.component.title,key:e.key,index:n})}))},buildHelpers(e){return 0===e.length?[]:e.map((e=>new C({pageKey:e.pageKey,header:e.header,content:e.content})))},afterSaveDraftHandler(){switch(!0){case this.hasPayment&&"payNow"===this.buttonClicked:this.payNowHandler();break;default:window.location.href=this.savedApplicationPage}},payNowHandler(){let e=`${document.location.protocol}//${document.location.host}${document.location.pathname}?submissionId=${this.formio.submission._id}`;k().post(this.paymentUrl,{data:{merchantUsername:this.formio.data.merchantUsername,billerCode:this.formio.data.billerCode,uuid:this.formio.data.uuid,email:this.formio.data.email,totalPrice:this.formio.data.totalPrice,paySuccess:this.formio.data.paySuccess,state:this.formio.data.state},draftSubmissionUrl:e,thankYouPageUrl:this.thankYouPage,submissionUrl:this.wizardUrl+"/submission/"+this.formio.submission._id,submissionId:this.formio.submission._id,formIdentifier:this.formIdentifier,recaptchaSiteKey:this.recaptchaSiteKey},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS"}}).then((function(e){window.location.href=e.data.payment_url})).catch((function(e){console.log(e)}))},prevPageHandler(){this.currentPageIndex=this.getCurrentPageIndex-1,this.formio.setPage(this.getCurrentPageIndex),this.updateCurrentPageIndex(this.currentPageIndex)},nextPageHandler(){this.currentPageIndex=this.getCurrentPageIndex+1,this.formio.setPage(this.getCurrentPageIndex),this.updateCurrentPageIndex(this.currentPageIndex)},gotoPageHandler(){this.currentPageIndex=this.getCurrentPageIndex,this.formio.setPage(this.getCurrentPageIndex),this.isLastPanel=this.getIsLastPanel,this.scrollToTop()},saveAndContinueButtonHandler(){this.formio.nextPage().then((()=>{this.updateCurrentPageIndex(parseInt(this.currentPageIndex)+1),this.formio.getComponent("currentPageIndex").setValue(this.getCurrentPageIndex.toString())})).finally((()=>{this.scrollToTop()}))},saveAndExitButtonHandler(){this.saveDraftHandler(),this.scrollToTop()},submitFormHandler(){this.formio.getComponent("state").setValue("submitted"),this.formio.submit().finally((()=>{this.scrollToTop()}))},saveDraftHandler(){this.formio.draftEnabled=!0,this.formio.savingDraft=!1,this.formio.getComponent("currentPageIndex").setValue(this.getCurrentPageIndex.toString()),this.formio.saveDraft()},scrollToTop(){window.scroll({top:0,behavior:"smooth"})},...(0,I.nv)(["setCurrentPageIndex","setPanelList","setHelpers","setCurrentHelper","updateCurrentPageIndex"])}},q=n(89);const H=(0,q.Z)(U,[["render",v]]);var A=H,F={name:"App",components:{LeftSideBar:f.Jq,FormWrapper:A,RightSideBar:f.mM},data(){return{projectUrl:"https://api.forms.platforms.qld.gov.au/la03e-uploader",wizardUrl:"https://api.forms.platforms.qld.gov.au/la03e-uploader/application-form",createFormUrl:"https://api.forms.platforms.qld.gov.au/la03e-uploader/application-form",formIdentifier:"la03-uploader-production",formName:"Form 03e - Permit to occupy",savedApplicationPage:"https://www.qld.gov.au/environment/land/state/application/forms/services/saved-application",thankYouPage:"https://www.qld.gov.au/environment/land/state/application/services/services/thank-you",userId:"60efc515839d17e60cd7bd99",submissionId:"",hasPayment:"true",paymentUrl:"https://apps.resources.qld.gov.au/payment/api/payment/land-application",recaptchaSiteKey:"6LfKymMaAAAAAFLAylqOntXqT7CW6t2HlMgMcvkC"}},beforeMount(){let e=window.location.search,t=new URLSearchParams(e),n=t.get("submissionId");this.createFormUrl=this.wizardUrl,n&&(this.createFormUrl+="/submission/"+n,this.submissionId=n)}};const L=(0,q.Z)(F,[["render",g]]);var D=L;(0,r.ri)(D).use(f.h).mount("#app")},6807:function(e){e.exports=Formio}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,r,i,a){if(!r){var s=1/0;for(u=0;u<e.length;u++){r=e[u][0],i=e[u][1],a=e[u][2];for(var o=!0,d=0;d<r.length;d++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[d])}))?r.splice(d--,1):(o=!1,a<s&&(s=a));if(o){e.splice(u--,1);var l=i();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,i,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,a,s=r[0],o=r[1],d=r[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(d)var u=d(n)}for(t&&t(r);l<s.length;l++)a=s[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},r=self["webpackChunkapp"]=self["webpackChunkapp"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(8661)}));r=n.O(r)})();
//# sourceMappingURL=app.5db130fb.js.map